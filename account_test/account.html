<!DOCTYPE html>
<html>

<head>
    <head>
    <!--各個畫面共同引用的套件-->
    <!--jQuery-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!--jQuery blockUI-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>
    <!--free-jqGrid-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/themes/redmond/jquery-ui.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.5/css/ui.jqgrid.min.css">
	<link rel='stylesheet' type="text/css" href='style/account.css' />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.5/jquery.jqgrid.min.js"></script>
    <!--網頁編碼-->
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    <!--不要發出找 icon 的 request-->
    <link rel="icon" href="data:;base64,=">
</head>
    <title>會員查詢</title>
</head>

<body>
    <div class="m-2">
        <table id="grid"></table>
	</div>
	<!-- <div id="sortＭodal" class="modal">
        <div class="sort_modal-content">
			<span class='sort_close'>&times;</span>
			<table id="sort_table">
			</table>
        </div>
	</div> -->
	<div id="pager"></div>

</body>

<script>
$(function () {
	//會員查詢表格
	var account_grid= $('#grid').jqGrid({
		url: '/queryUser',
		datatype: 'json',
		mtype: 'post',colNames:["店家 <button onclick='sort_mess(`shop_id`)'>ˇ</button>","日期 <button>ˇ</button>", "類別 <button>ˇ</button>", "科目 <button>ˇ</button>","借方 <button>ˇ</button>","貸方 <button>ˇ</button>","備註"],
		colModel: [
			{ name: 'shop_id',sortable:false},
			{ name: 'account_time',sortable:false},
			{ name: 'account_class' ,sortable:false},
			{ name: 'account_tradeclass' ,sortable:false},
			{ name: 'account_price_debit', align: 'right',sortable:false},
			{ name: 'account_price_credit', align: 'right',sortable:false},
			{ name: 'account_note',sortable:false},
		],//欄位資訊
		rownumbers: true,//是否显示行号。true：显示
		rowNum: 10,         //jqGrid預設顯示筆數
   		rowList:[10,20,30],	//一頁顯示幾筆資料
		rownumWidth: 30,// 行号所在列的宽度
		autowidth: true,	//自動調整寬度
		pager: '#pager',	//是否開啟分頁
		caption: 'Ranger清單',
        sortorder: "asc",                //jqGrid預設排序方式asc升冪，desc降冪
        caption: '記帳清單',           //jqGrid標題欄顯示的文字
        loadonce: true,                 //是否只載入一次
		page: 1,			//現在在第幾頁
		viewrecords: true,	//是否要看到資料總數
		onSortCol: function(name,index){ alert("Column Name: "+name+" Column Index: "+index);},
		ondblClickRow: function(id){ alert("You double click row with id: "+id);},
	});
	jQuery('#grid').jqGrid('navGrid','#pager',
		{
			"add":true,
			"del":true,	
			"refresh":true,
			"view":true,
			"excel":true,
			"pdf":true,
		},
		{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150},
		{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150});
	account_grid.trigger("reloadGrid");
});

function sort_mess(sort_id) {　


var account_grid= $('#sort_table').jqGrid({
		url: '/queryUser/sort?sort_id='+sort_id,
		datatype: 'json',
		mtype: 'post',colNames:["yoyo"],
		colModel: [
			{ name: 'sort_list',sortable:false}
		],//欄位資訊
		rownumbers: true,//是否显示行号。true：显示
		rowNum:10,
   		rowList:[10,20,30],	//一頁顯示幾筆資料
		rownumWidth: 30,// 行号所在列的宽度
		autowidth: true,	//自動調整寬度
		pager: '#pager',	//是否開啟分頁
		page: 1,			//現在在第幾頁
		viewrecords: true,	//是否要看到資料總數
		onSortCol: function(name,index){ alert("Column Name: "+name+" Column Index: "+index);},
		ondblClickRow: function(id){ alert("You double click row with id: "+id);},

	},
	);
	account_grid.trigger("reloadGrid");
  
var sort_modal= document.getElementById("sortＭodal");
sort_modal.style.display="block";
// When the user clicks on <span> (x), close the modal
var sort_span = document.getElementsByClassName("sort_close")[0];
sort_span.onclick = function() {
sort_modal.style.display = "none";
}
}
</script>
</html>
